## –ò–Ω—Å—Ç–∞–ª–µ–π—à–æ–Ω

ü§™ Node.js ‚â• 10<br>
üëæ MongoDB ‚â• 4<br>
üëª PM2 ‚â• 3

```sh
mongod
git clone
npm ci
```

–ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–Ω–æ–≥–æ –∏–∑ —Ä–æ–±–æ—Ç–æ–≤ –º–æ–∂–Ω–æ —Ç–∞–∫:

```sh
node app/api.js
node app/cian-crawler.js
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

`/api` ‚Äì http —Ä—É—á–∫–∏
`/app` ‚Äì –ø—Ä–æ—Ü–µ—Å—Å—ã, –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ pm2
`/lib` ‚Äì –æ—Å–Ω–æ–≤–Ω–æ–π –Ω–æ–¥–æ–≤—ã–π –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞
`/lib/bots` ‚Äì —Ä–æ–±–æ—Ç—ã
`/lib/db` ‚Äì –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π
`/config` ‚Äì –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
`.env` ‚Äì —Å–µ–∫—Ä–µ—Ç–∏–∫–∏ (—Å–º. [dotenv](https://github.com/motdotla/dotenv))
`ecosystem.config.js` ‚Äì –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è PM2 (–¥–µ–ø–ª–æ–π + –∑–∞–ø—É—Å–∫)

## –î–∏—Å–∫–ª–µ–π–º–µ—Ä

- –ù–∞–∑–≤–∞–Ω–∏–µ `mordor` –¥–æ–ª–≥–∞—è –∏—Å—Ç–æ—Ä–∏—è
- –û—Ç –ì–∏—Ç—Ö–∞–±–∞ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ —Ö–æ—Å—Ç–∏–Ω–≥ + —Ä–µ–≤–∏–∑–∏–∏, —Ç–∞–∫ —á—Ç–æ –∫–æ–º–º–∏—Ç –º–µ—Å–∞–¥–∂–∏ –Ω–µ —Å–º–æ—Ç—Ä–µ—Ç—å üò≥

## –î–µ–ø–ª–æ–π

–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—Å–µ –∑–∞–ø—É—à–∏—Ç—å, –∑–∞—Ç–µ–º:

```sh
pm2 deploy production update
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://pm2.io/doc/en/runtime/guide/easy-deploy-with-ssh/

## –†–µ—Ü–µ–ø—Ç—ã

–û–±–Ω–æ–≤–∏—Ç—å `.env`

```sh
scp .env ddml@host:~
```

## –ú—ç–¥–∂–∏–∫

1. –ü–∞–∫–µ—Ç `node-gyp` —Ç—Ä–µ–±—É–µ—Ç Python 2.7.
   **–õ–µ—á–µ–Ω–∏–µ**:

```js
npm config set python '/usr/bin/python2.7'
```

2. PM2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —à–µ–ª –¥–ª—è –¥–µ–ø–ª–æ—è, –ø–æ—ç—Ç–æ–º—É —Å—Ç—Ä–æ—á–∫–∏ –ø—Ä–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ nvm –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–∞–º–æ–º –≤–µ—Ä—Ö—É `.bashrc` –¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.
